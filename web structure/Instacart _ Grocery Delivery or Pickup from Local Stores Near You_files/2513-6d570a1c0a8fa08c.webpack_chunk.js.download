!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},i=(new Error).stack;i&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[i]="ae564ec3-9572-4c9e-9e5e-5684788481f8",e._sentryDebugIdIdentifier="sentry-dbid-ae564ec3-9572-4c9e-9e5e-5684788481f8")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"landing-client@7106377e40f37b1255bcecf1c8a220b540dd76f8"},(self.webpackChunk=self.webpackChunk||[]).push([[2513],{14415:(e,i,n)=>{n.r(i),n.d(i,{default:()=>O});var t=n(0),a=n(34436),d=n(27888),o=n(83457),l=n(83162),r=n(978),s=n(96572),c=n(7438),u=n(4707),v=n(95771);const m=(0,l.k)((e=>({subtitle:{...e.typography.bodyMedium2,marginBottom:o.spacing.s24},errorText:{...e.typography.bodySmall2,color:e.colors.systemDetrimentalDark,paddingLeft:o.spacing.s16},resultsContainer:{minHeight:"325px",marginTop:o.spacing.s12}}))),g={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AddressModalLayout"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewLayout"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"addressModal"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"confirmation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"buttonString"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"currentLocation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"buttonString"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"defaultString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"otherStoresString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"storeNotAvailableString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"findStoresString"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subtitle"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"defaultString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"noStoresAvailableString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"otherStoresAvailableString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"helpUsLocateString"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"input"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hintString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"placeholderString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"addressNavigationInstructionsString"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"errorMessage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"addressNotRecognizedString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"invalidAddressString"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"trackingProperties"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tracking"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewTrackingEvent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"addressClickTrackingEvent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"addressErrorTrackingEvent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"submitTrackingEvent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"closeClickTrackingEvent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:1175,source:{body:"\n  query AddressModalLayout {\n    viewLayout {\n      id\n      addressModal {\n        id\n        confirmation {\n          buttonString\n        }\n        currentLocation {\n          id\n          buttonString\n        }\n        title {\n          id\n          defaultString\n          otherStoresString\n          storeNotAvailableString\n          findStoresString\n        }\n        subtitle {\n          id\n          defaultString\n          noStoresAvailableString\n          otherStoresAvailableString\n          helpUsLocateString\n        }\n        input {\n          id\n          hintString\n          placeholderString\n          addressNavigationInstructionsString\n        }\n        errorMessage {\n          id\n          addressNotRecognizedString\n          invalidAddressString\n        }\n        trackingProperties\n        tracking {\n          viewTrackingEvent {\n            name\n          }\n          addressClickTrackingEvent {\n            name\n          }\n          addressErrorTrackingEvent {\n            name\n          }\n          submitTrackingEvent {\n            name\n          }\n          closeClickTrackingEvent {\n            name\n          }\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},k={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AddressModalAutoCompleteLocations"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"autocompleteLocations"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"streetAddress"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"postalCode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"coordinates"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"latitude"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"longitude"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"viewSection"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lineOneString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lineTwoString"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:333,source:{body:"\n  query AddressModalAutoCompleteLocations($query: String!) {\n    autocompleteLocations(query: $query) {\n      locations {\n        streetAddress\n        postalCode\n        coordinates {\n          latitude\n          longitude\n        }\n        viewSection {\n          lineOneString\n          lineTwoString\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},S={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AddressModalCurrentLocation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"coordinates"}},type:{kind:"NamedType",name:{kind:"Name",value:"CoordinatesInput"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addressFromCoordinates"},arguments:[{kind:"Argument",name:{kind:"Name",value:"coordinates"},value:{kind:"Variable",name:{kind:"Name",value:"coordinates"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"streetAddress"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"postalCode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"coordinates"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"latitude"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"longitude"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"viewSection"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lineOneString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lineTwoString"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:309,source:{body:"\n  query AddressModalCurrentLocation($coordinates: CoordinatesInput) {\n    addressFromCoordinates(coordinates: $coordinates) {\n      streetAddress\n      postalCode\n      coordinates {\n        latitude\n        longitude\n      }\n      viewSection {\n        lineOneString\n        lineTwoString\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},p=()=>(0,a.aM)(g);var b=n(64353),h=n(36398),f=n(38839);const y=(0,l.k)((e=>({currentLocation:{...e.typography.bodyLarge1,color:e.colors.systemGrayscale70,display:"flex",flexDirection:"row",alignItems:"center",width:"100%",backgroundColor:e.colors.systemGrayscale00,border:"none",height:"50px",padding:"".concat(o.spacing.s16,"px ").concat(o.spacing.s12,"px"),cursor:"pointer"},icon:{marginRight:o.spacing.s12,width:"19px",height:"19px"}})));const N=function(e){let{visible:i,buttonText:n,onGeolocationSuccess:d}=e;const[l,r]=(0,t.useState)(!1),[s,c]=(0,t.useState)(!1),u=y(),{loading:v,coords:m}=(0,h.Z)({skip:!l}),[g,{data:k,loading:p}]=(0,a.td)(S),N=v||p;if((0,t.useEffect)((()=>{null!=m&&m.latitude&&null!=m&&m.longitude&&g({variables:{coordinates:m}})}),[m,g]),(0,t.useEffect)((()=>{N||null==k||!k.addressFromCoordinates||s||(d(k),c(!0))}),[k,N,s,d]),!i)return null;const w=N&&l?(0,f.tZ)(b.$,{spinnerStyles:{width:"13px",height:"13px"}}):(0,f.tZ)(o.RouteIcon,{size:24,"aria-hidden":"true"});return(0,f.BX)("button",{css:u.currentLocation,onClick:()=>{l?null!=k&&k.addressFromCoordinates&&d(k):r(!0)},disabled:N&&l,children:[(0,f.tZ)("div",{css:u.icon,children:w}),(0,f.tZ)("span",{children:n})]})},w=(0,l.k)((e=>({resultsContainer:{border:"1px solid ".concat(e.colors.systemGrayscale30),borderRadius:o.spacing.s12},address:{display:"flex",flexDirection:"row",width:"100%",backgroundColor:e.colors.systemGrayscale00,border:"none",cursor:"pointer",fontFamily:"inherit",padding:o.spacing.s12,borderRadius:o.spacing.s12,":hover":{backgroundColor:e.colors.systemGrayscale10}},addressText:{marginLeft:o.spacing.s12,width:"100%",textAlign:"left"},addressStreet:{...e.typography.bodyMedium1,color:e.colors.systemGrayscale70,textOverflow:"ellipsis",width:"360px",overflow:"hidden",whiteSpace:"nowrap",[o.responsive.down("c")]:{width:"100%"}},addressCity:{...e.typography.bodySmall2,color:e.colors.systemGrayscale50,textOverflow:"ellipsis",width:"360px",overflow:"hidden",whiteSpace:"nowrap",[o.responsive.down("c")]:{width:"100%"}},activeItem:{backgroundColor:e.colors.systemGrayscale10},list:{listStyleType:"none",margin:0,padding:0}})));const F=function(e){let{popupId:i,results:n,labelId:a,showResults:d,onAddressClick:l,setSelectedLocation:s,setActiveOptionId:c,handleEscape:u}=e;const v=w(),[m,g]=(0,t.useState)(-1),{id:k}=(0,r.i)(),S=(0,t.useCallback)((e=>{const{code:i}=e;if(["ArrowDown","ArrowUp"].includes(i)&&e.preventDefault(),"ArrowDown"===i&&m<n.length-1){const e=m+1;g(e),s(n[e]),c("".concat(k,"_").concat(e))}else if("ArrowUp"===i&&m>0){const e=m-1;g(e),s(n[e]),c("".concat(k,"_").concat(e))}else"Enter"===i&&m>-1?l(n[m])():"Escape"===i&&(u(),c(void 0))}),[m,n,s,c,k,l,u]);return(0,t.useEffect)((()=>(document.addEventListener("keydown",S),()=>{document.removeEventListener("keydown",S)})),[S]),null!=n&&n.length&&d?(0,f.tZ)("div",{css:v.resultsContainer,id:i,children:(0,f.tZ)("ul",{role:"listbox","aria-labelledby":a,css:v.list,children:null==n?void 0:n.map(((e,i)=>(0,f.tZ)("li",{"aria-selected":m===i,role:"option",id:"".concat(k,"_").concat(i),children:(0,f.BX)("button",{css:[v.address,m===i&&v.activeItem,""],onClick:l(e),children:[(0,f.tZ)(o.MarkerIcon,{size:24}),(0,f.BX)("div",{css:v.addressText,children:[(0,f.tZ)("div",{css:v.addressStreet,children:e.viewSection.lineOneString}),(0,f.tZ)("div",{css:v.addressCity,children:e.viewSection.lineTwoString})]})]})},"".concat(e.viewSection.lineOneString).concat(e.viewSection.lineTwoString).concat(e.postalCode))))})}):null};var C=n(8324);const A=(0,l.k)({form:{width:"100%"},arrowIcon:{cursor:"pointer",background:"none",border:"none"}});const I=function(e){var i,n;let{error:a,currentInput:d,placeholderText:l,inputRef:s,popupId:c,showResults:u,errorId:v,labelId:m,activeOptionId:g,onInputChange:k,onFormSubmit:S}=e;const b=A(),{data:h}=p(),[y,N]=(0,t.useState)(!1),{id:w}=(0,r.i)(),{id:F}=(0,r.i)(),I=null==h||null===(i=h.viewLayout)||void 0===i||null===(n=i.addressModal)||void 0===n?void 0:n.input;return(0,f.BX)("form",{onSubmit:S,css:b.form,children:[(0,f.BX)(C.Z,{children:[(0,f.tZ)("label",{htmlFor:w,id:m,children:null==I?void 0:I.placeholderString}),(0,f.tZ)("div",{id:F,"aria-hidden":!y,children:null==I?void 0:I.addressNavigationInstructionsString})]}),(0,f.tZ)(o.TextInputBase,{invalid:a,onFocus:()=>{N(!0)},onBlur:()=>{N(!1)},id:w,onChange:k,value:d,label:l||"",placeholder:l,ref:s,autoComplete:"off","aria-autocomplete":"list","aria-controls":c,"aria-expanded":u,"aria-haspopup":"listbox","aria-describedby":"".concat(F," ").concat(a?v:""),"aria-activedescendant":g,leadingIcon:()=>(0,f.tZ)(o.MarkerIcon,{size:24,"aria-hidden":"true"}),trailingIcon:()=>(0,f.tZ)("button",{css:b.arrowIcon,"aria-label":"Submit Address",children:(0,f.tZ)(o.ArrowRightIcon,{size:24})})})]})};const E=function AddressInputError(e){let{id:i,visible:n,errorText:t}=e;const a=m();return n?(0,f.tZ)("span",{id:i,css:a.errorText,children:t}):null};var T=n(7335);const L=new RegExp(/^\d+$/);const x=function(e){var i,n,d,o;let{modalState:l,selectedRetailerName:g,filterPostalCodes:S,title:b,subtitle:h,titleKey:y="defaultString",subtitleKey:w="defaultString",showInput:A=!0,onAddressSelect:x,onConfirmationClick:Z}=e;const _=m(),D=(0,t.useRef)(null),[M,R]=(0,t.useState)(""),[O,q]=(0,t.useState)(null),[B,G]=(0,t.useState)(null),[V,U]=(0,t.useState)(""),[X,$]=(0,t.useState)(),[z,P]=(0,t.useState)(!1),[K]=(0,v.Z)(M,300),{id:H}=(0,r.i)(),{id:Q}=(0,r.i)(),{id:W}=(0,r.i)(),{trackEvent:Y}=(0,u.r)(),{data:j}=p(),{data:J}=(ee=K,(0,a.aM)(k,{skip:!ee,variables:{query:ee}}));var ee;const ie=null==J?void 0:J.autocompleteLocations.locations,ne=S?null==ie?void 0:ie.filter((e=>e.streetAddress)):ie,te=Boolean(ne&&ne.length>0),ae=V.length>0,de=null==j?void 0:j.viewLayout.addressModal.tracking,{t:oe}=(0,T.F)(["globals.signup_widget"]);(0,t.useEffect)((()=>{var e;l.visible&&Y((null==de||null===(e=de.viewTrackingEvent)||void 0===e?void 0:e.name)||"address_modal.view")}),[l.visible,null==de||null===(i=de.viewTrackingEvent)||void 0===i?void 0:i.name,Y]);const{title:le,subtitle:re}=(null==j?void 0:j.viewLayout.addressModal)||{},se=b||(le?le[y].replace("{store_name}",g||""):""),ce=h||(re?re[w]:""),ue=e=>{ae&&U(""),R(e)},ve=()=>{var e;Y((null==de||null===(e=de.closeClickTrackingEvent)||void 0===e?void 0:e.name)||"address_modal.close"),l.hide()},me=!c.Z.isIos();return(0,f.BX)(s.tX1,{hideOnClickOutside:!0,modal:l,initialFocusElem:me?D:void 0,"aria-label":se,"aria-autocomplete":"list","aria-controls":H,"aria-expanded":te,"aria-haspopup":"listbox",hideOnEsc:!1,children:[(0,f.tZ)(s.xBx,{hide:ve,accessibleLabels:{close:"close"},children:(0,f.tZ)(s.r6B,{children:se})}),(0,f.BX)(s.hzk,{children:[(0,f.tZ)("p",{css:_.subtitle,children:ce}),A&&(0,f.BX)(f.HY,{children:[(0,f.tZ)(I,{inputRef:D,currentInput:M,error:ae,onInputChange:e=>{let{target:{value:i}}=e;z||P(!0),ue(i)},onFormSubmit:e=>{var i,n;null===(i=D.current)||void 0===i||i.focus(),e.preventDefault();const t=(e=>{let i;var n,t;if(S&&L.test(e)||e.length<5)i=(null==j||null===(n=j.viewLayout.addressModal.errorMessage)||void 0===n?void 0:n.invalidAddressString)||"";else if(!te&&!O){var a;i=(null==j||null===(a=j.viewLayout.addressModal.errorMessage)||void 0===a?void 0:a.addressNotRecognizedString)||""}return void 0===i||(U(i),Y((null==de||null===(t=de.addressErrorTrackingEvent)||void 0===t?void 0:t.name)||"address_modal.address_error"),!1)})(M);var a,d,o,l,r,s;if(Y((null==de||null===(n=de.submitTrackingEvent)||void 0===n?void 0:n.name)||"address_modal.submit"),t&&O)x({postalCode:(null===(a=O.addressFromCoordinates)||void 0===a?void 0:a.postalCode)||"",streetAddress:(null===(d=O.addressFromCoordinates)||void 0===d?void 0:d.streetAddress)||"",coordinates:{latitude:(null===(o=O.addressFromCoordinates)||void 0===o||null===(l=o.coordinates)||void 0===l?void 0:l.latitude)||"",longitude:(null===(r=O.addressFromCoordinates)||void 0===r||null===(s=r.coordinates)||void 0===s?void 0:s.longitude)||""}});else if(t&&B){var c,u;x({postalCode:B.postalCode||"",streetAddress:(null==B?void 0:B.streetAddress)||"",coordinates:{latitude:(null==B||null===(c=B.coordinates)||void 0===c?void 0:c.latitude)||"",longitude:(null==B||null===(u=B.coordinates)||void 0===u?void 0:u.longitude)||""}})}else if(t&&!O&&ne){var v,m;const[e]=ne;x({postalCode:e.postalCode||"",streetAddress:e.streetAddress||"",coordinates:{latitude:(null===(v=e.coordinates)||void 0===v?void 0:v.latitude)||"",longitude:(null===(m=e.coordinates)||void 0===m?void 0:m.longitude)||""}})}},placeholderText:null==j||null===(n=j.viewLayout.addressModal.input)||void 0===n?void 0:n.placeholderString,showResults:te,popupId:H,errorId:Q,labelId:W,activeOptionId:X}),(0,f.tZ)(C.Z,{children:(0,f.tZ)("div",{"aria-live":"assertive",children:(()=>{const e=null==ne?void 0:ne.length;return void 0===e||document.activeElement!==D.current?null:0===e?oe("signup_widget.address_input.results_found_0"):1===e?oe("signup_widget.address_input.results_found_1"):oe("signup_widget.address_input.results_found_n").replace("{count}","".concat(e))})()})}),(0,f.tZ)(E,{id:Q,visible:ae,errorText:V}),(0,f.BX)("div",{css:_.resultsContainer,children:[(0,f.tZ)(N,{visible:!te,buttonText:(null==j||null===(d=j.viewLayout.addressModal.currentLocation)||void 0===d?void 0:d.buttonString)||"",onGeolocationSuccess:e=>{var i,n;ue("".concat(null===(i=e.addressFromCoordinates)||void 0===i?void 0:i.viewSection.lineOneString,", ").concat(null===(n=e.addressFromCoordinates)||void 0===n?void 0:n.viewSection.lineTwoString)),q(e)}}),(0,f.tZ)(F,{popupId:H,results:ne||[],onAddressClick:e=>()=>{var i;const{postalCode:n,streetAddress:t,coordinates:a}=e;Y((null==de||null===(i=de.addressClickTrackingEvent)||void 0===i?void 0:i.name)||"address_modal.address_click"),x({postalCode:n||"",streetAddress:t||"",coordinates:{latitude:(null==a?void 0:a.latitude)||"",longitude:(null==a?void 0:a.longitude)||""}})},setSelectedLocation:e=>G(e),labelId:W,setActiveOptionId:$,handleEscape:()=>{te&&z?P(!1):ve()},showResults:z})]})]}),!A&&(0,f.tZ)(s.KMU,{onClick:Z,children:null==j||null===(o=j.viewLayout.addressModal.confirmation)||void 0===o?void 0:o.buttonString})]})]})};var Z=n(1843);const _={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AddressModalServices"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postalCode"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"coordinates"}},type:{kind:"NamedType",name:{kind:"Name",value:"UsersCoordinatesInput"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"availableRetailerServicesWithoutAuth"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postalCode"},value:{kind:"Variable",name:{kind:"Name",value:"postalCode"}}},{kind:"Argument",name:{kind:"Name",value:"coordinates"},value:{kind:"Variable",name:{kind:"Name",value:"coordinates"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"retailerId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"services"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:228,source:{body:"\n  query AddressModalServices($postalCode: String!, $coordinates: UsersCoordinatesInput) {\n    availableRetailerServicesWithoutAuth(postalCode: $postalCode, coordinates: $coordinates) {\n      retailerId\n      services\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};var D=n(7356);const M="/store",R=(0,l.k)({loadingAfterRetailerClick:{height:"100vh",position:"fixed"}}),O=e=>{let{selectedRetailer:i,modalState:n,finalUrl:l=M}=e;const r=R(),[s,c]=(0,t.useState)(null),[u,{loading:v}]=(0,Z.DE)(),[m,g]=(0,t.useState)(!1),[k,S]=(0,t.useState)(!1),[p,b]=(0,t.useState)(!1),h=async e=>{n.hide(),g(!0);try{await u({variables:{postalCode:null==e?void 0:e.postalCode,streetAddress:null==e?void 0:e.streetAddress}}),window.location.assign(l)}catch(e){d.Z.error("Error creating a guest user",{error:e,owner:D.Z.acquisition});const i=new URL(l,window.location.origin);i.searchParams.set("guest","true"),window.location.assign(i.toString())}},[y,{loading:N}]=(0,a.td)(_,{onCompleted(e){const n=null==e?void 0:e.availableRetailerServicesWithoutAuth;(null==n?void 0:n.find((e=>{let{retailerId:n}=e;return n===(null==i?void 0:i.id)})))?h(s):null!=n&&n.length?b(!0):S(!0)}}),[w,F]=i?p?["otherStoresString","otherStoresAvailableString"]:k?["storeNotAvailableString","noStoresAvailableString"]:["defaultString","defaultString"]:["findStoresString","helpUsLocateString"];return m||N||v?(0,f.tZ)(o.LoadingGenericOnExit,{css:r.loadingAfterRetailerClick}):(0,f.tZ)(x,{modalState:n,onAddressSelect:e=>{i?(c(e),y({variables:{postalCode:e.postalCode,coordinates:e.coordinates}})):h(e)},titleKey:w,subtitleKey:F,showInput:!p&&!k,onConfirmationClick:()=>{n.hide(),c(null),b(!1),S(!1)},selectedRetailerName:null==i?void 0:i.name,filterPostalCodes:!0})}},36398:(e,i,n)=>{n.d(i,{Z:()=>t.m});var t=n(35687)},35687:(e,i,n)=>{n.d(i,{m:()=>a});var t=n(0);const a=function(){let{enableHighAccuracy:e=!0,timeout:i=5e3,skip:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[a,d]=(0,t.useState)({coords:null,loading:!0,error:null});return(0,t.useEffect)((()=>{let t=!0;const a=e=>i=>{t&&e(i)};return navigator.geolocation&&!n&&navigator.geolocation.getCurrentPosition(a((e=>{let{coords:{latitude:i,longitude:n}}=e;d({coords:{latitude:i,longitude:n},error:null,loading:!1})})),a((e=>{let{code:i}=e;d({coords:null,error:i,loading:!1})})),{enableHighAccuracy:e,timeout:i}),()=>{t=!1}}),[e,i,n]),a}}}]);