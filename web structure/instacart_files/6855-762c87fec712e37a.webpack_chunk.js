!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="7b9e9f26-88d4-4f55-88a7-06ad9b7b8e27",e._sentryDebugIdIdentifier="sentry-dbid-7b9e9f26-88d4-4f55-88a7-06ad9b7b8e27")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"landing-client@46622c00f9a0b12d592b51a9e585d4d23b404e2c"},(self.webpackChunk=self.webpackChunk||[]).push([[6855],{26276:(e,n,t)=>{t.d(n,{fp:()=>i,nW:()=>a});const i=e=>{var n;return(null===(n=e.global.currentUser)||void 0===n?void 0:n.active_service_type)||""},a=e=>{var n;return(null===(n=e.global.currentUser)||void 0===n?void 0:n.active_address_id)||""}},31533:(e,n,t)=>{t.d(n,{DG:()=>L});var i=t(51872);const a=(0,t(146).P1)((e=>e.app.modal),(e=>e&&e.modalType));var o=t(26276),l=t(0),r=t(55645),d=t(3533),s=t(7438),c=t(42329),u=t(83457),m=t(80573),v=t(3946),g=t(34436),k=t(39615);const b=["paid_social","display","sem"];var f=t(8277),y=t(32431);const S={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"StickyOnboardingModalLayout"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewLayout"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"activations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stickyOnboardingModal"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headerString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"buttonLabelString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modalImage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"altText"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subtitleStringFormatted"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sections"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"legal"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"newCustomersOnlyTermsStringFormatted"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sections"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:610,source:{body:"\n  query StickyOnboardingModalLayout {\n    viewLayout {\n      id\n      activations {\n        id\n        stickyOnboardingModal {\n          id\n          headerString\n          buttonLabelString\n          modalImage {\n            url\n            altText\n          }\n          subtitleStringFormatted {\n            sections {\n              name\n              content\n            }\n          }\n        }\n        legal {\n          id\n          newCustomersOnlyTermsStringFormatted {\n            id\n            sections {\n              name\n              content\n            }\n          }\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};const p=(0,t(83162).k)((e=>({valueProp:{color:e.colors.brandPromotionalRegular},terms:{...e.typography.bodyMedium2,color:e.colors.systemGrayscale70},link:{color:"inherit",textDecoration:"underline"},loadingSection:{height:"20rem"},headerString:{...e.typography.titleLarge,color:e.colors.systemGrayscale70},subtitleString:{...e.typography.bodyLarge1,color:e.colors.systemGrayscale70,margin:"".concat(u.spacing.s12,"px 0")},modalImage:{height:"auto",width:"100%",marginBottom:"1rem"}})));var h=t(38839);const _={zIndex:9e3},w=(0,c.Z)({loader:()=>Promise.resolve().then(t.bind(t,11)).then((e=>e.default.StyleRoot)),webpack:()=>[11]});const F=(0,y.Z)(["globals.sticky_onboarding_modal"])((function(e){var n,t,i,a;const{modalState:o,modalOptions:s={}}=e,c=p(),{trackEvent:y}=(0,d.r)(),[F,O]=(0,l.useState)(!1),[E,N]=(0,l.useState)(!1),{data:M,loading:Z,error:L}=(0,g.aM)(S),{modalImage:C,headerString:R,subtitleStringFormatted:T,buttonLabelString:I}=(null==M||null===(n=M.viewLayout)||void 0===n||null===(t=n.activations)||void 0===t?void 0:t.stickyOnboardingModal)||{},{newCustomersOnlyTermsStringFormatted:x}=(null==M||null===(i=M.viewLayout)||void 0===i||null===(a=i.activations)||void 0===a?void 0:a.legal)||{},D=e.t("sticky_onboarding_modal.close_modal_aria_label"),P=e.t("sticky_onboarding_modal.free_delivery_terms"),H=(0,v.useHistory)(),{location:B}=H,U=new URLSearchParams(B.search),A=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return y("activation.sticky_onboarding_modal.".concat(e),n)},G=()=>{A("modal_close"),N(!1),O(!0)},q=()=>A("button_press",{source_type:"navigate_to_signup"}),X=e=>Z?(0,h.tZ)(u.LoadingLockupTextRow,{}):e;return L?(m.Z.warn("Unable to load sticky onboarding data",{error:L,owner:"activation"}),null):F||(e=>{const n=e.get("utm_medium");return b.includes(n)})(U)?null:(0,h.BX)(w,{children:[(0,h.BX)(r.tX1,{modal:o,"aria-label":R,hideOnClickOutside:!0,hideOnEsc:!0,backdropStyles:{backdrop:_},style:_,children:[(0,h.tZ)(r.xBx,{accessibleLabels:{close:D},hide:G}),(0,h.tZ)(r.hzk,{children:X((0,h.BX)(h.HY,{children:[(0,h.tZ)("img",{src:null==C?void 0:C.url,alt:(null==C?void 0:C.altText)||"",style:c.modalImage}),(0,h.tZ)("h1",{"data-testid":"header",css:c.headerString,children:R}),(0,h.tZ)("p",{css:c.subtitleString,children:(0,k.WU)(null==T?void 0:T.sections,{},{value_prop:e=>(0,h.tZ)("span",{style:c.valueProp,children:e},e)})}),(0,h.tZ)("p",{css:c.terms,children:(0,k.WU)(null==x?void 0:x.sections,{},{terms_link:e=>(0,h.tZ)("a",{href:P,style:c.link,onClick:q,target:"_blank",rel:"noreferrer",children:e},e)})})]}))}),(0,h.tZ)(r.mzw,{children:X((0,h.tZ)(r.KMU,{onClick:()=>{A("button_press",{source_type:"navigate_to_log_in"}),N(!0)},children:I}))})]}),(0,h.tZ)(f.default,{isOpen:E,onRequestClose:G,options:{initialPath:f.Path.Signup,trackEvent:function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return y("signup.".concat(e),n)},...s}})]})}));var O=t(68),E=t.n(O);function N(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let M=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.value=n||"sticky_onboarding_modal"}var n,t,i;return n=e,(t=[{key:"getHasSeenModal",value:function(){return!!E().get(this.value)}},{key:"storeHasSeenModal",value:function(){return E().set(this.value,Date.now())}}])&&N(n.prototype,t),i&&N(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}();const Z="activation.sticky_onboarding_modal";function L(e){let{blockModalReason:n,localStorageKey:t,modalOptions:i={},modalCanOpen:a,onTriggered:o}=e;const c=(0,l.useRef)(new M(t)),u=(0,l.useRef)(!1),{trackEvent:m}=(0,d.r)(),v=(0,r.X9F)(),[g,k]=(0,l.useState)(),[b,f]=(0,l.useState)(),y=(()=>{const[e,n]=(0,l.useState)(!1),t=(0,l.useRef)(!0),i=(0,l.useCallback)((()=>t.current),[]),a=t=>{e&&t.clientY>20?n(!1):!e&&t.clientY<=20&&n(!0),setTimeout((()=>{i()&&n(!1)}),100)};return(0,l.useEffect)((()=>()=>{t.current=!1}),[]),(0,l.useEffect)((()=>(window.document.documentElement.addEventListener("mouseleave",a),()=>window.document.documentElement.removeEventListener("mouseleave",a)))),e})(),S=(0,l.useRef)(!1),p=!1===b&&!1===g,_=p&&a;return(0,l.useEffect)((()=>{if(!u.current&&y&&p){if(document.querySelectorAll('.ReactModal__Content[role="dialog"]')[0])return;u.current=y,o&&p&&(c.current.storeHasSeenModal(),o())}}),[u,y,o,p]),(0,l.useEffect)((()=>{void 0===b&&f(Boolean(s.Z.getCookie("known_visitor"))),void 0===g&&k(c.current.getHasSeenModal())}),[b,g]),(0,l.useEffect)((()=>{if(u.current&&_){const e=c.current.getHasSeenModal();if(e)return void k(e);if(n)return void m(Z,"modal_prevented",{source:n});v.setVisible(!0)}}),[u,_,n,m,v,a]),(0,l.useEffect)((()=>{!S.current&&v.visible&&(m(Z,"modal_opened"),c.current.storeHasSeenModal()),S.current=v.visible}),[m,v,S]),a?(0,h.tZ)(F,{modalState:v,modalOptions:i}):null}(0,i.connect)((e=>({getModalIsOpen:a(e),hasActiveAddress:Boolean((0,o.nW)(e))})))((function(e){let{getModalIsOpen:n,hasActiveAddress:t,modalOptions:i={},onTriggered:a}=e;return(0,h.tZ)(L,{modalCanOpen:t,blockModalReason:n,modalOptions:i,onTriggered:a})}))},6855:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var i=t(0),a=t(42329),o=t(31533),l=t(3823),r=t(38839);const d=(0,a.Z)({loader:()=>Promise.all([t.e(9939),t.e(7771)]).then(t.bind(t,27771)),webpack:()=>[27771]});const s=function(){const{busy:e}=(0,l.ho)(),n=(0,l.K$)(),[t,a]=(0,i.useState)(!1),s=(0,i.useCallback)((()=>{n.show(),a(!0)}),[n,a]);return t||e?(0,r.tZ)(d,{modalState:n}):(0,r.tZ)(o.DG,{localStorageKey:"homeExpressEmailSignupExitIntentModal",modalCanOpen:!0,blockModalReason:"expressEmailSignup",onTriggered:s})}}}]);