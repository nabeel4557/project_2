!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="a5088538-49b5-4181-9db1-051d47353c2b",e._sentryDebugIdIdentifier="sentry-dbid-a5088538-49b5-4181-9db1-051d47353c2b")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"landing-client@46622c00f9a0b12d592b51a9e585d4d23b404e2c"},(self.webpackChunk=self.webpackChunk||[]).push([[2513],{64353:(e,n,i)=>{i.d(n,{$:()=>m});var t,a=i(75246),d=i(1),o=i.n(d),r=i(38839);const s=(0,a.F4)(t||(l=["\n  0% { transform: rotate(0deg) }\n  100% { transform: rotate(359deg) }\n"],c||(c=l.slice(0)),t=Object.freeze(Object.defineProperties(l,{raw:{value:Object.freeze(c)}}))));var l,c;const u={spinner:{height:"20px",width:"20px",margin:"0 auto",position:"relative",animation:"".concat(s," 10s linear infinite"),border:"3px solid rgba(163, 163, 163, 0.3)",borderRadius:"100%"},before:{display:"block",position:"absolute",left:0,top:"-3px",height:"100%",width:"100%",borderTop:"3px solid rgba(186, 186, 186, 0.8)",borderLeft:"3px solid transparent",borderBottom:"3px solid transparent",borderRight:"3px solid transparent",borderRadius:"100%"}},v=e=>(0,r.tZ)("div",{css:(0,a.iv)({width:"100%",background:"transparent",...e.style},""),"aria-hidden":!0,children:(0,r.tZ)("div",{css:[u.spinner,e.spinnerStyles,""],"data-testid":"spinner",children:(0,r.tZ)("div",{css:[u.before,e.beforeStyles,""]})})});v.propTypes={style:o().shape({}),spinnerStyles:o().shape({}),beforeStyles:o().shape({})};const m=v},14415:(e,n,i)=>{i.r(n),i.d(n,{default:()=>O});var t=i(0),a=i(34436),d=i(27888),o=i(83457),r=i(83162),s=i(978),l=i(55645),c=i(7438),u=i(4707),v=i(95771);const m=(0,r.k)((e=>({subtitle:{...e.typography.bodyMedium2,marginBottom:o.spacing.s24},errorText:{...e.typography.bodySmall2,color:e.colors.systemDetrimentalDark,paddingLeft:o.spacing.s16},resultsContainer:{minHeight:"325px",marginTop:o.spacing.s12}}))),g={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AddressModalLayout"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewLayout"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"addressModal"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"confirmation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"buttonString"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"currentLocation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"buttonString"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"defaultString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"otherStoresString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"storeNotAvailableString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"findStoresString"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subtitle"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"defaultString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"noStoresAvailableString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"otherStoresAvailableString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"helpUsLocateString"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"input"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hintString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"placeholderString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"addressNavigationInstructionsString"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"errorMessage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"addressNotRecognizedString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"invalidAddressString"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"trackingProperties"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tracking"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewTrackingEvent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"addressClickTrackingEvent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"addressErrorTrackingEvent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"submitTrackingEvent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"closeClickTrackingEvent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:1175,source:{body:"\n  query AddressModalLayout {\n    viewLayout {\n      id\n      addressModal {\n        id\n        confirmation {\n          buttonString\n        }\n        currentLocation {\n          id\n          buttonString\n        }\n        title {\n          id\n          defaultString\n          otherStoresString\n          storeNotAvailableString\n          findStoresString\n        }\n        subtitle {\n          id\n          defaultString\n          noStoresAvailableString\n          otherStoresAvailableString\n          helpUsLocateString\n        }\n        input {\n          id\n          hintString\n          placeholderString\n          addressNavigationInstructionsString\n        }\n        errorMessage {\n          id\n          addressNotRecognizedString\n          invalidAddressString\n        }\n        trackingProperties\n        tracking {\n          viewTrackingEvent {\n            name\n          }\n          addressClickTrackingEvent {\n            name\n          }\n          addressErrorTrackingEvent {\n            name\n          }\n          submitTrackingEvent {\n            name\n          }\n          closeClickTrackingEvent {\n            name\n          }\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},k={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AddressModalAutoCompleteLocations"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"autocompleteLocations"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"streetAddress"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"postalCode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"coordinates"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"latitude"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"longitude"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"viewSection"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lineOneString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lineTwoString"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:333,source:{body:"\n  query AddressModalAutoCompleteLocations($query: String!) {\n    autocompleteLocations(query: $query) {\n      locations {\n        streetAddress\n        postalCode\n        coordinates {\n          latitude\n          longitude\n        }\n        viewSection {\n          lineOneString\n          lineTwoString\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},p={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AddressModalCurrentLocation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"coordinates"}},type:{kind:"NamedType",name:{kind:"Name",value:"CoordinatesInput"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addressFromCoordinates"},arguments:[{kind:"Argument",name:{kind:"Name",value:"coordinates"},value:{kind:"Variable",name:{kind:"Name",value:"coordinates"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"streetAddress"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"postalCode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"coordinates"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"latitude"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"longitude"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"viewSection"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lineOneString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lineTwoString"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:309,source:{body:"\n  query AddressModalCurrentLocation($coordinates: CoordinatesInput) {\n    addressFromCoordinates(coordinates: $coordinates) {\n      streetAddress\n      postalCode\n      coordinates {\n        latitude\n        longitude\n      }\n      viewSection {\n        lineOneString\n        lineTwoString\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},S=()=>(0,a.aM)(g);var b=i(64353),h=i(36398),f=i(38839);const y=(0,r.k)((e=>({currentLocation:{...e.typography.bodyLarge1,color:e.colors.systemGrayscale70,display:"flex",flexDirection:"row",alignItems:"center",width:"100%",backgroundColor:e.colors.systemGrayscale00,border:"none",height:"50px",padding:"".concat(o.spacing.s16,"px ").concat(o.spacing.s12,"px"),cursor:"pointer"},icon:{marginRight:o.spacing.s12,width:"19px",height:"19px"}})));const N=function(e){let{visible:n,buttonText:i,onGeolocationSuccess:d}=e;const[r,s]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!1),u=y(),{loading:v,coords:m}=(0,h.Z)({skip:!r}),[g,{data:k,loading:S}]=(0,a.td)(p),N=v||S;if((0,t.useEffect)((()=>{null!=m&&m.latitude&&null!=m&&m.longitude&&g({variables:{coordinates:m}})}),[m,g]),(0,t.useEffect)((()=>{N||null==k||!k.addressFromCoordinates||l||(d(k),c(!0))}),[k,N,l,d]),!n)return null;const w=N&&r?(0,f.tZ)(b.$,{spinnerStyles:{width:"13px",height:"13px"}}):(0,f.tZ)(o.RouteIcon,{size:24,"aria-hidden":"true"});return(0,f.BX)("button",{css:u.currentLocation,onClick:()=>{r?null!=k&&k.addressFromCoordinates&&d(k):s(!0)},disabled:N&&r,children:[(0,f.tZ)("div",{css:u.icon,children:w}),(0,f.tZ)("span",{children:i})]})},w=(0,r.k)((e=>({resultsContainer:{border:"1px solid ".concat(e.colors.systemGrayscale30),borderRadius:o.spacing.s12},address:{display:"flex",flexDirection:"row",width:"100%",backgroundColor:e.colors.systemGrayscale00,border:"none",cursor:"pointer",fontFamily:"inherit",padding:o.spacing.s12,borderRadius:o.spacing.s12,":hover":{backgroundColor:e.colors.systemGrayscale10}},addressText:{marginLeft:o.spacing.s12,width:"100%",textAlign:"left"},addressStreet:{...e.typography.bodyMedium1,color:e.colors.systemGrayscale70,textOverflow:"ellipsis",width:"360px",overflow:"hidden",whiteSpace:"nowrap",[o.responsive.down("c")]:{width:"100%"}},addressCity:{...e.typography.bodySmall2,color:e.colors.systemGrayscale50,textOverflow:"ellipsis",width:"360px",overflow:"hidden",whiteSpace:"nowrap",[o.responsive.down("c")]:{width:"100%"}},activeItem:{backgroundColor:e.colors.systemGrayscale10},list:{listStyleType:"none",margin:0,padding:0}})));const F=function(e){let{popupId:n,results:i,labelId:a,showResults:d,onAddressClick:r,setSelectedLocation:l,setActiveOptionId:c,handleEscape:u}=e;const v=w(),[m,g]=(0,t.useState)(-1),{id:k}=(0,s.i)(),p=(0,t.useCallback)((e=>{const{code:n}=e;if(["ArrowDown","ArrowUp"].includes(n)&&e.preventDefault(),"ArrowDown"===n&&m<i.length-1){const e=m+1;g(e),l(i[e]),c("".concat(k,"_").concat(e))}else if("ArrowUp"===n&&m>0){const e=m-1;g(e),l(i[e]),c("".concat(k,"_").concat(e))}else"Enter"===n&&m>-1?r(i[m])():"Escape"===n&&(u(),c(void 0))}),[m,i,l,c,k,r,u]);return(0,t.useEffect)((()=>(document.addEventListener("keydown",p),()=>{document.removeEventListener("keydown",p)})),[p]),null!=i&&i.length&&d?(0,f.tZ)("div",{css:v.resultsContainer,id:n,children:(0,f.tZ)("ul",{role:"listbox","aria-labelledby":a,css:v.list,children:null==i?void 0:i.map(((e,n)=>(0,f.tZ)("li",{"aria-selected":m===n,role:"option",id:"".concat(k,"_").concat(n),children:(0,f.BX)("button",{css:[v.address,m===n&&v.activeItem,""],onClick:r(e),children:[(0,f.tZ)(o.MarkerIcon,{size:24}),(0,f.BX)("div",{css:v.addressText,children:[(0,f.tZ)("div",{css:v.addressStreet,children:e.viewSection.lineOneString}),(0,f.tZ)("div",{css:v.addressCity,children:e.viewSection.lineTwoString})]})]})},"".concat(e.viewSection.lineOneString).concat(e.viewSection.lineTwoString).concat(e.postalCode))))})}):null};var C=i(8324);const A=(0,r.k)({form:{width:"100%"},arrowIcon:{cursor:"pointer",background:"none",border:"none"}});const I=function(e){var n,i;let{error:a,currentInput:d,placeholderText:r,inputRef:l,popupId:c,showResults:u,errorId:v,labelId:m,activeOptionId:g,onInputChange:k,onFormSubmit:p}=e;const b=A(),{data:h}=S(),[y,N]=(0,t.useState)(!1),{id:w}=(0,s.i)(),{id:F}=(0,s.i)(),I=null==h||null===(n=h.viewLayout)||void 0===n||null===(i=n.addressModal)||void 0===i?void 0:i.input;return(0,f.BX)("form",{onSubmit:p,css:b.form,children:[(0,f.BX)(C.Z,{children:[(0,f.tZ)("label",{htmlFor:w,id:m,children:null==I?void 0:I.placeholderString}),(0,f.tZ)("div",{id:F,"aria-hidden":!y,children:null==I?void 0:I.addressNavigationInstructionsString})]}),(0,f.tZ)(o.TextInputBase,{invalid:a,onFocus:()=>{N(!0)},onBlur:()=>{N(!1)},id:w,onChange:k,value:d,label:r||"",placeholder:r,ref:l,autoComplete:"off","aria-autocomplete":"list","aria-controls":c,"aria-expanded":u,"aria-haspopup":"listbox","aria-describedby":"".concat(F," ").concat(a?v:""),"aria-activedescendant":g,leadingIcon:()=>(0,f.tZ)(o.MarkerIcon,{size:24,"aria-hidden":"true"}),trailingIcon:()=>(0,f.tZ)("button",{css:b.arrowIcon,"aria-label":"Submit Address",children:(0,f.tZ)(o.ArrowRightIcon,{size:24})})})]})};const x=function AddressInputError(e){let{id:n,visible:i,errorText:t}=e;const a=m();return i?(0,f.tZ)("span",{id:n,css:a.errorText,children:t}):null};var E=i(7335);const T=new RegExp(/^\d+$/);const L=function(e){var n,i,d,o;let{modalState:r,selectedRetailerName:g,filterPostalCodes:p,title:b,subtitle:h,titleKey:y="defaultString",subtitleKey:w="defaultString",showInput:A=!0,onAddressSelect:L,onConfirmationClick:Z}=e;const R=m(),_=(0,t.useRef)(null),[D,M]=(0,t.useState)(""),[O,q]=(0,t.useState)(null),[B,G]=(0,t.useState)(null),[V,$]=(0,t.useState)(""),[z,U]=(0,t.useState)(),[X,P]=(0,t.useState)(!1),[K]=(0,v.Z)(D,300),{id:H}=(0,s.i)(),{id:Q}=(0,s.i)(),{id:j}=(0,s.i)(),{trackEvent:W}=(0,u.r)(),{data:Y}=S(),{data:J}=(ee=K,(0,a.aM)(k,{skip:!ee,variables:{query:ee}}));var ee;const ne=null==J?void 0:J.autocompleteLocations.locations,ie=p?null==ne?void 0:ne.filter((e=>e.streetAddress)):ne,te=Boolean(ie&&ie.length>0),ae=V.length>0,de=null==Y?void 0:Y.viewLayout.addressModal.tracking,{t:oe}=(0,E.F)(["globals.signup_widget"]);(0,t.useEffect)((()=>{var e;r.visible&&W((null==de||null===(e=de.viewTrackingEvent)||void 0===e?void 0:e.name)||"address_modal.view")}),[r.visible,null==de||null===(n=de.viewTrackingEvent)||void 0===n?void 0:n.name,W]);const{title:re,subtitle:se}=(null==Y?void 0:Y.viewLayout.addressModal)||{},le=b||(re?re[y].replace("{store_name}",g||""):""),ce=h||(se?se[w]:""),ue=e=>{ae&&$(""),M(e)},ve=()=>{var e;W((null==de||null===(e=de.closeClickTrackingEvent)||void 0===e?void 0:e.name)||"address_modal.close"),r.hide()},me=!c.Z.isIos();return(0,f.BX)(l.tX1,{hideOnClickOutside:!0,modal:r,initialFocusElem:me?_:void 0,"aria-label":le,"aria-autocomplete":"list","aria-controls":H,"aria-expanded":te,"aria-haspopup":"listbox",hideOnEsc:!1,children:[(0,f.tZ)(l.xBx,{hide:ve,accessibleLabels:{close:"close"},children:(0,f.tZ)(l.r6B,{children:le})}),(0,f.BX)(l.hzk,{children:[(0,f.tZ)("p",{css:R.subtitle,children:ce}),A&&(0,f.BX)(f.HY,{children:[(0,f.tZ)(I,{inputRef:_,currentInput:D,error:ae,onInputChange:e=>{let{target:{value:n}}=e;X||P(!0),ue(n)},onFormSubmit:e=>{var n,i;null===(n=_.current)||void 0===n||n.focus(),e.preventDefault();const t=(e=>{let n;var i,t;if(p&&T.test(e)||e.length<5)n=(null==Y||null===(i=Y.viewLayout.addressModal.errorMessage)||void 0===i?void 0:i.invalidAddressString)||"";else if(!te&&!O){var a;n=(null==Y||null===(a=Y.viewLayout.addressModal.errorMessage)||void 0===a?void 0:a.addressNotRecognizedString)||""}return void 0===n||($(n),W((null==de||null===(t=de.addressErrorTrackingEvent)||void 0===t?void 0:t.name)||"address_modal.address_error"),!1)})(D);var a,d,o,r,s,l;if(W((null==de||null===(i=de.submitTrackingEvent)||void 0===i?void 0:i.name)||"address_modal.submit"),t&&O)L({postalCode:(null===(a=O.addressFromCoordinates)||void 0===a?void 0:a.postalCode)||"",streetAddress:(null===(d=O.addressFromCoordinates)||void 0===d?void 0:d.streetAddress)||"",coordinates:{latitude:(null===(o=O.addressFromCoordinates)||void 0===o||null===(r=o.coordinates)||void 0===r?void 0:r.latitude)||"",longitude:(null===(s=O.addressFromCoordinates)||void 0===s||null===(l=s.coordinates)||void 0===l?void 0:l.longitude)||""}});else if(t&&B){var c,u;L({postalCode:B.postalCode||"",streetAddress:(null==B?void 0:B.streetAddress)||"",coordinates:{latitude:(null==B||null===(c=B.coordinates)||void 0===c?void 0:c.latitude)||"",longitude:(null==B||null===(u=B.coordinates)||void 0===u?void 0:u.longitude)||""}})}else if(t&&!O&&ie){var v,m;const[e]=ie;L({postalCode:e.postalCode||"",streetAddress:e.streetAddress||"",coordinates:{latitude:(null===(v=e.coordinates)||void 0===v?void 0:v.latitude)||"",longitude:(null===(m=e.coordinates)||void 0===m?void 0:m.longitude)||""}})}},placeholderText:null==Y||null===(i=Y.viewLayout.addressModal.input)||void 0===i?void 0:i.placeholderString,showResults:te,popupId:H,errorId:Q,labelId:j,activeOptionId:z}),(0,f.tZ)(C.Z,{children:(0,f.tZ)("div",{"aria-live":"assertive",children:(()=>{const e=null==ie?void 0:ie.length;return void 0===e||document.activeElement!==_.current?null:0===e?oe("signup_widget.address_input.results_found_0"):1===e?oe("signup_widget.address_input.results_found_1"):oe("signup_widget.address_input.results_found_n").replace("{count}","".concat(e))})()})}),(0,f.tZ)(x,{id:Q,visible:ae,errorText:V}),(0,f.BX)("div",{css:R.resultsContainer,children:[(0,f.tZ)(N,{visible:!te,buttonText:(null==Y||null===(d=Y.viewLayout.addressModal.currentLocation)||void 0===d?void 0:d.buttonString)||"",onGeolocationSuccess:e=>{var n,i;ue("".concat(null===(n=e.addressFromCoordinates)||void 0===n?void 0:n.viewSection.lineOneString,", ").concat(null===(i=e.addressFromCoordinates)||void 0===i?void 0:i.viewSection.lineTwoString)),q(e)}}),(0,f.tZ)(F,{popupId:H,results:ie||[],onAddressClick:e=>()=>{var n;const{postalCode:i,streetAddress:t,coordinates:a}=e;W((null==de||null===(n=de.addressClickTrackingEvent)||void 0===n?void 0:n.name)||"address_modal.address_click"),L({postalCode:i||"",streetAddress:t||"",coordinates:{latitude:(null==a?void 0:a.latitude)||"",longitude:(null==a?void 0:a.longitude)||""}})},setSelectedLocation:e=>G(e),labelId:j,setActiveOptionId:U,handleEscape:()=>{te&&X?P(!1):ve()},showResults:X})]})]}),!A&&(0,f.tZ)(l.KMU,{onClick:Z,children:null==Y||null===(o=Y.viewLayout.addressModal.confirmation)||void 0===o?void 0:o.buttonString})]})]})};var Z=i(1843);const R={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AddressModalServices"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postalCode"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"coordinates"}},type:{kind:"NamedType",name:{kind:"Name",value:"UsersCoordinatesInput"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"availableRetailerServicesWithoutAuth"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postalCode"},value:{kind:"Variable",name:{kind:"Name",value:"postalCode"}}},{kind:"Argument",name:{kind:"Name",value:"coordinates"},value:{kind:"Variable",name:{kind:"Name",value:"coordinates"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"retailerId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"services"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:228,source:{body:"\n  query AddressModalServices($postalCode: String!, $coordinates: UsersCoordinatesInput) {\n    availableRetailerServicesWithoutAuth(postalCode: $postalCode, coordinates: $coordinates) {\n      retailerId\n      services\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};var _=i(7356);const D="/store",M=(0,r.k)({loadingAfterRetailerClick:{height:"100vh",position:"fixed"}}),O=e=>{let{selectedRetailer:n,modalState:i,finalUrl:r=D}=e;const s=M(),[l,c]=(0,t.useState)(null),[u,{loading:v}]=(0,Z.DE)(),[m,g]=(0,t.useState)(!1),[k,p]=(0,t.useState)(!1),[S,b]=(0,t.useState)(!1),h=async e=>{i.hide(),g(!0);try{await u({variables:{postalCode:null==e?void 0:e.postalCode,streetAddress:null==e?void 0:e.streetAddress}}),window.location.assign(r)}catch(e){d.Z.error("Error creating a guest user",{error:e,owner:_.Z.acquisition});const n=new URL(r,window.location.origin);n.searchParams.set("guest","true"),window.location.assign(n.toString())}},[y,{loading:N}]=(0,a.td)(R,{onCompleted(e){const i=null==e?void 0:e.availableRetailerServicesWithoutAuth;(null==i?void 0:i.find((e=>{let{retailerId:i}=e;return i===(null==n?void 0:n.id)})))?h(l):null!=i&&i.length?b(!0):p(!0)}}),[w,F]=n?S?["otherStoresString","otherStoresAvailableString"]:k?["storeNotAvailableString","noStoresAvailableString"]:["defaultString","defaultString"]:["findStoresString","helpUsLocateString"];return m||N||v?(0,f.tZ)(o.LoadingGenericOnExit,{css:s.loadingAfterRetailerClick}):(0,f.tZ)(L,{modalState:i,onAddressSelect:e=>{n?(c(e),y({variables:{postalCode:e.postalCode,coordinates:e.coordinates}})):h(e)},titleKey:w,subtitleKey:F,showInput:!S&&!k,onConfirmationClick:()=>{i.hide(),c(null),b(!1),p(!1)},selectedRetailerName:null==n?void 0:n.name,filterPostalCodes:!0})}},36398:(e,n,i)=>{i.d(n,{Z:()=>t.m});var t=i(35687)},35687:(e,n,i)=>{i.d(n,{m:()=>a});var t=i(0);const a=function(){let{enableHighAccuracy:e=!0,timeout:n=5e3,skip:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[a,d]=(0,t.useState)({coords:null,loading:!0,error:null});return(0,t.useEffect)((()=>{let t=!0;const a=e=>n=>{t&&e(n)};return navigator.geolocation&&!i&&navigator.geolocation.getCurrentPosition(a((e=>{let{coords:{latitude:n,longitude:i}}=e;d({coords:{latitude:n,longitude:i},error:null,loading:!1})})),a((e=>{let{code:n}=e;d({coords:null,error:n,loading:!1})})),{enableHighAccuracy:e,timeout:n}),()=>{t=!1}}),[e,n,i]),a}},95771:(e,n,i)=>{i.d(n,{Z:()=>o});var t=i(0),a=i(79685);function d(e,n){return e===n}function o(e,n,i){var o=i&&i.equalityFn?i.equalityFn:d,r=(0,t.useState)(e),s=r[0],l=r[1],c=(0,a.Z)((0,t.useCallback)((function(e){return l(e)}),[]),n,i),u=c[0],v=c[1],m=c[2],g=(0,t.useRef)(e);return(0,t.useEffect)((function(){o(g.current,e)||(u(e),g.current=e)}),[e,u,o]),[s,v,m]}}}]);